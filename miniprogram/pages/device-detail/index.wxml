<view class="container">
  <!-- ä¸»ç•Œé¢ -->
  <block wx:if="{{!type}}">
    <view class="header">
      <text class="title">è®¾å¤‡ç›®å½•</text>
    </view>

    <view class="device-categories">
      <view class="category-card" bindtap="navigateToCategory" data-type="lights">
        <view class="category-icon">ğŸ’¡</view>
        <view class="category-info">
          <text class="category-name">ç¯å…‰æ§åˆ¶</text>
          <text class="category-desc">æ§åˆ¶å®¤å†…å¤–ç…§æ˜è®¾å¤‡</text>
        </view>
        <view class="category-arrow">></view>
      </view>

      <view class="category-card" bindtap="navigateToCategory" data-type="motors">
        <view class="category-icon">âš™ï¸</view>
        <view class="category-info">
          <text class="category-name">ç”µæœºæ§åˆ¶</text>
          <text class="category-desc">æ§åˆ¶çª—å¸˜ã€é—¨ç­‰è®¾å¤‡</text>
        </view>
        <view class="category-arrow">></view>
      </view>

      <view class="category-card" bindtap="navigateToCategory" data-type="solar">
        <view class="category-icon">â˜€ï¸</view>
        <view class="category-info">
          <text class="category-name">å¤ªé˜³èƒ½æ§åˆ¶</text>
          <text class="category-desc">ç›‘æ§å’Œç®¡ç†å¤ªé˜³èƒ½ç³»ç»Ÿ</text>
        </view>
        <view class="category-arrow">></view>
      </view>

      <view class="category-card" bindtap="navigateToCategory" data-type="network">
        <view class="category-icon">ğŸ“¡</view>
        <view class="category-info">
          <text class="category-name">ç½‘ç»œçŠ¶æ€</text>
          <text class="category-desc">æŸ¥çœ‹ç½‘ç»œè¿æ¥å’Œè®¾å¤‡çŠ¶æ€</text>
        </view>
        <view class="category-arrow">></view>
      </view>
    </view>
  </block>

  <!-- è®¾å¤‡è¯¦æƒ…ç•Œé¢ -->
  <block wx:else>
    <view class="header">
      <text class="title">{{title}}</text>
    </view>

    <view class="device-list">
      <view wx:for="{{devices}}" wx:key="id" class="device-card">
        <view class="device-header">
          <text class="device-name">{{item.name}}</text>
          <switch checked="{{item.status}}" bindchange="toggleDevice" data-id="{{item.id}}" />
        </view>

        <view class="device-info">
          <view wx:if="{{type === 'lights'}}" class="info-item brightness-control">
            <view class="brightness-header">
              <text class="label">äº®åº¦</text>
              <input class="brightness-input" type="number" value="{{item.brightness}}" bindinput="updateBrightness" data-id="{{item.id}}" />
            </view>
            <slider class="brightness-slider" value="{{item.brightness}}" min="0" max="100" show-value block-size="28" activeColor="#07c160" backgroundColor="#e5e5e5" bindchange="adjustBrightness" data-id="{{item.id}}" />
          </view>

          <view wx:if="{{type === 'motors'}}" class="info-item">
            <text class="label">ä½ç½®</text>
            <slider value="{{item.position}}" min="0" max="100" show-value bindchange="adjustPosition" data-id="{{item.id}}" />
          </view>

          <view wx:if="{{type === 'solar'}}" class="info-item">
            <text class="label">ç”µæ± ç”µé‡</text>
            <text class="value">{{item.batteryLevel}}%</text>
          </view>

          <view wx:if="{{type === 'solar'}}" class="info-item">
            <text class="label">è¾“å‡ºåŠŸç‡</text>
            <text class="value">{{item.outputPower}}W</text>
          </view>

          <view wx:if="{{type === 'network'}}" class="info-item">
            <text class="label">ä¿¡å·å¼ºåº¦</text>
            <text class="value">{{item.signalStrength}}%</text>
          </view>

          <view wx:if="{{type === 'network'}}" class="info-item">
            <text class="label">IPåœ°å€</text>
            <text class="value">{{item.ipAddress}}</text>
          </view>

          <view wx:if="{{item.location}}" class="info-item">
            <text class="label">ä½ç½®</text>
            <text class="value">{{item.location}}</text>
          </view>
        </view>
      </view>
    </view>

    <view class="bottom-button">
      <view class="back-button" bindtap="backToMain">
        <text class="back-text">è¿”å›ä¸»ç•Œé¢</text>
      </view>
    </view>
  </block>
</view> 